汇编笔记
=======

- **cpu运算器：**
	PN 结 --> 二极管/三极管 --> 逻辑门电路（与或非）--> 加法器 -->加减乘除逻辑运算

- **段地址+偏移地址：** 
	8086 CPU为16位结构。地址总线20位。
	为达到20位的寻址能力，使用两个16位地址合成20位地址。一个段地址SA，一个偏移地址EA。

	一个段 最大地址范围是 64 KB

	- 段寄存器 CS、DS、SS、ES

		CS 和 IP 合成指令地址。其值不能使用MOV改变，而是其他转移指令，如jmp

		jmp 1000:3	同时修改 CS IP
		jmp bx		修改 IP 为 BX 的值

	8086 CPU 可以将小于 64KB 的空间定义为代码段。

- **debug**
	-D   查看内存
	-U   将内存翻译为汇编
	-A   向内存中写入汇编指令
	-E   修改内存内容
	-R   查看或修改寄存器内容
	-T   单步执行内存中的指令

	主板ROM生产日期：FFF00H ~ FFFFFH
	显存：B8000H ~

- **寄存器（内存访问）**
	段寄存器：DS,CS,SS,ES.
	8086 CPU 不支持将数据直接送入段寄存器。需要通用寄存器中转

	AX 累加。DIV MUL 根据长度配合 DX
	BX 偏移寻址。MOV AX,[BX]
	CX LOOP时，若CX值为0跳出，否则CX-1继续
	DX DIV MUL 时配合AX
- **栈**
	SS:SP
	空栈时，SS:SP指向栈空间最高地址的下一个单元。
	push: sp-2; 向SS:SP指向的字单元送入数据。
	pup: 从SS:SP指向的字单元读数据; sp+2

	一个栈最大为 SP的表示范围，64KB。
	SP 在0-FFFF中循环

	DEBUG的T命令在执行 MOV SS,* 时，它的下一条命令也紧接着被执行了

- **编译连接生产exe**
	exe 中的机器码包含两部分信息：
		1 描述信息（程序的大小等）
		2 程序部分

	exe 载入内存的过程：
		1 找到足够空间的连续内存区域
		2 在开头的256字节中创建 PSP（与DOS通信）
		3 在 SA+10H:0 将程序装入
		(** CX中存放程序的长度 **)
		4 设置 DS=SA，CS:IP->SA+10H:0

		空闲内存区：SA:0
			PSP 区：SA:0
			程序区：SA+10H:0

- **loop和[BX]**

在汇编源程序中：
	1 数据不能以字母开头（添0）
	2 指定内存单元地址有两种：
		》DS:[0]
		》[BX]  == DS:[BX]

DEBUG 中 G 命令直接执行到指定地址
	P 命令执行完LOOP

	一般情况 0:200 ~ 0:2ff 没有使用
	

- **CPU实模式和保护模式**





